---
date: 2020-07-18 05:44:48 +0
title: Ello 2020-07-18T05:44:48.315Z
---
UE4 でプロジェクトのパッケージの時に起こっていた問題を修正するためにエンジンのソースを少し変更してみたところ、なぜか Mac でビルドができなくなってしまった。

```
[UE4] LogInit: Warning: Still incompatible or missing module: NekoGameDemo
```

NekoGameDemo というのは今作っているゲームの名前です。UE4 のプロジェクトをいったんクリーンしてからビルドしなおしたり、ゲームのプロジェクトの Intermediate とかのフォルダを消してやり直してもダメで、思いつくことは一通り試したけど、何か試すたびに何時間もかかるビルドを待つ必要があって途方に暮れていた。

で、最終的に、プロジェクトを C++ から Blueprint のプロジェクトに変更したら上の問題も出なくなったので、無事に Mac のビルドができた。

もともとゲーム自体はすべて Blueprint で記述しているけど C++ のプロジェクトとしていたのは、Spine のプラグインが C++ で書かれていたのでプロジェクト本体も C++ にしなきゃいけないと思っていたからだった。たしか Spine のドキュメントにもそう書いてあった。でも試しに Blueprint のプロジェクトを新規に作ってそこに Spine のプラグインを組み込んでみたところちゃんと動いたので、いま作っているゲームのプロジェクトも Blueprint に変更することにした。

しかしプロジェクトを C++ から Blueprint へ簡単に切り替えるような機能はないので、下のような流れで手動で切り替えた：

- まず新しい Blueprint プロジェクトを作る。
- 次に元のプロジェクトからコンテンツを全て新しいプロジェクトへマイグレートする。
- 元のプロジェクトの GameMode クラスはエンジンが自動的に作った C++ のクラスから派生していたので、これを純粋な Blueprint クラスとして作り直す。
- 元のプロジェクトからインプット関連のプロジェクト設定をエクスポートし、あたらしいプロジェクトへインポートする。
- .git ディレクトリをそのまま新しいプロジェクトへコピーする。これで差分が簡単にわかる。
- そのほか細かいファイルもコピーしておわり。

これでソースからコンパイルした UE4 を使ってパッケージをビルドしたら無事に動いた。

#UE4

